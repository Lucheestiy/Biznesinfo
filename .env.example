# Meilisearch Configuration
# Generate a secure key with: openssl rand -hex 32
MEILI_MASTER_KEY=your-secure-master-key-min-16-chars

# Admin API Secret for reindexing
# Generate with: openssl rand -hex 32
ADMIN_SECRET=your-admin-secret-for-reindex-api

# Yandex Maps JS API key (used for interactive map + geosearch)
YANDEX_MAPS_API_KEY=your-yandex-maps-api-key

# Host port (default 8116)
HOST_PORT=8116

# Database (Auth / plans / AI limits)
# For the docker-compose Postgres service in this repo:
POSTGRES_USER=biznesinfo
POSTGRES_PASSWORD=change-me
POSTGRES_DB=biznesinfo
DATABASE_URL=postgresql://biznesinfo:change-me@postgres:5432/biznesinfo

# Auth feature flags & settings
AUTH_ENABLED=0
# Cookie secure flag (default: true in production)
AUTH_COOKIE_SECURE=1
# Session lifetime in days
AUTH_SESSION_DAYS=30
# Password reset token TTL (minutes)
AUTH_RESET_TOKEN_TTL_MIN=30
# Return reset token in JSON response (debug only!)
AUTH_DEBUG_RESET_TOKENS=0
# Enable AI usage reset endpoint (/api/ai/reset-usage)
AI_USAGE_RESET_ENABLED=0
# Optional: upstream login endpoint for premium/admin federation between environments.
# Example (cross-stack Docker network routing):
# AUTH_FEDERATION_UPSTREAM_LOGIN_URL=http://biznesinfo-develop-app:3000/api/auth/login
AUTH_FEDERATION_UPSTREAM_LOGIN_URL=

# Optional email (for password reset)
SMTP_URL=
EMAIL_FROM=no-reply@biznesinfo.lucheestiy.com
PUBLIC_BASE_URL=https://biznesinfo.lucheestiy.com

# AI chat storage isolation
# Must be unique per deployment (production vs develop) to prevent chat mixing.
AI_INSTANCE_ID=biznesinfo.lucheestiy.com
# Optional separate DB for chat history.
# If empty, chat history is stored in DATABASE_URL.
AI_CHATS_DATABASE_URL=

# Upstream domain suffix for Biznesinfo logos (enables /api/biznesinfo/logo proxy + caching)
# Example resolved URL: https://{company-subdomain}.{suffix}/images/logo/12345.gif
# For Biznesinfo/ibiz sources this is usually:
BIZNESINFO_LOGO_UPSTREAM_SUFFIX=ibiz.by

# Kartoteka API token for liquidation checks by UNP (optional).
# Even without token, cards without UNP can still be checked by name
# via public Kartoteka search endpoint.
KARTOTEKA_API_TOKEN=
KARTOTEKA_API_BASE_URL=https://api.kartoteka.by
KARTOTEKA_PUBLIC_SEARCH_BASE_URL=https://apiv1.kartoteka.by
# How long to cache Kartoteka EGR responses
KARTOTEKA_CACHE_TTL_HOURS=168
# How long to cache name-based Kartoteka checks
KARTOTEKA_NAME_CACHE_TTL_HOURS=24
# Kartoteka request timeout in milliseconds
KARTOTEKA_TIMEOUT_MS=5000
# Persistent blacklist path for companies confirmed as liquidated.
# Recommended location is a writable volume.
BIZNESINFO_LIQUIDATED_BLACKLIST_PATH=/tmp/biznesinfo-liquidated-blacklist/liquidated-blacklist.json

# AI assistant provider
AI_ASSISTANT_PROVIDER=stub  # stub|openai|codex
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_TIMEOUT_SEC=20
OPENAI_MAX_TOKENS=800
AI_WEBSITE_SCAN_ENABLED=1
AI_WEBSITE_SCAN_TIMEOUT_MS=4200

# Codex CLI auth
CODEX_AUTH_JSON_PATH=/run/secrets/codex_auth_json
CODEX_BASE_URL=https://chatgpt.com/backend-api/codex
CODEX_MODEL=gpt-5.2-codex
