(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},90454,e=>{"use strict";var t=e.i(43476),s=e.i(18566),r=e.i(71645),a=e.i(2971),l=e.i(13642),n=e.i(83445),i=e.i(11110),o=e.i(89482),c=e.i(36910),d=e.i(42129),u=e.i(69322);function h({currentPage:e,totalPages:s,onPageChange:r}){let{t:a}=(0,i.useLanguage)();if(s<=1)return null;let l=[];if(s<=7)for(let e=1;e<=s;e++)l.push(e);else{l.push(1),e>3&&l.push("...");let t=Math.max(2,e-1),r=Math.min(s-1,e+1);for(let e=t;e<=r;e++)l.push(e);e<s-2&&l.push("..."),l.push(s)}return(0,t.jsxs)("nav",{className:"flex items-center justify-center gap-2 mt-10","aria-label":"Pagination",children:[(0,t.jsxs)("button",{onClick:()=>r(e-1),disabled:1===e,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300",children:["â† ",a("common.previous")||"ÐÐ°Ð·Ð°Ð´"]}),l.map((s,a)=>"..."===s?(0,t.jsx)("span",{className:"px-3 py-2 text-gray-400",children:"â€¦"},`ellipsis-${a}`):(0,t.jsx)("button",{onClick:()=>r(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors
              ${e===s?"bg-[#820251] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300"}`,children:s},s)),(0,t.jsxs)("button",{onClick:()=>r(e+1),disabled:e===s,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300",children:[a("common.next")||"Ð”Ð°Ð»ÐµÐµ"," â†’"]})]})}var m=e.i(22016);function x(){let e=(0,s.useSearchParams)(),{t:x}=(0,i.useLanguage)(),{selectedRegion:g,setSelectedRegion:p,regionName:f}=(0,o.useRegion)(),b=(0,s.useRouter)(),y=e.get("q")||"",j=e.get("keywords")||"",v=e.get("service")||j,N=e.get("city")||"",w=e.get("region")||"",[k,C]=(0,r.useState)(y),[S,P]=(0,r.useState)(v),[M,L]=(0,r.useState)(N),[R,T]=(0,r.useState)(!1),$=(0,r.useRef)(null),z=(0,r.useRef)(null),F="w-full rounded-2xl bg-white text-[#820251] font-medium text-[15px] placeholder:text-gray-500/60 placeholder:font-normal px-4 pr-14 py-3.5 shadow-sm border border-gray-200 focus:outline-none focus:ring-2 focus:ring-yellow-300/70 focus:border-[#820251]/30 focus:placeholder:text-gray-500/60",E="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 rounded-xl bg-[#820251]/10 text-[#820251] hover:bg-[#820251]/15 active:bg-[#820251]/20 transition-colors flex items-center justify-center";(0,r.useEffect)(()=>{C(y),P(v),L(N)},[y,v,N]),(0,r.useEffect)(()=>{if(!w||N.trim())return;let e=c.regions.some(e=>e.slug===w)?w:null;e!==g&&p(e)},[w,N,g,p]),(0,r.useEffect)(()=>{N.trim()&&g&&p(null)},[N,g,p]);let B=(e,t)=>{let s=new URLSearchParams,r=(t?.q??k).trim(),a=(t?.service??S).trim(),l=(t?.city??M).trim(),n=t?.region??g;r&&s.set("q",r),a&&s.set("service",a),l&&s.set("city",l),!l&&n&&s.set("region",n);let i=s.toString(),o=i?`/search?${i}`:"/search";"replace"===e?b.replace(o):b.push(o)},[q,O]=(0,r.useState)(null),[D,U]=(0,r.useState)(!1),[W,A]=(0,r.useState)(1);(0,r.useEffect)(()=>{let e=k.trim(),t=S.trim(),s=M.trim();if(e!==y.trim()||t!==v.trim()||s!==N.trim())return z.current&&window.clearTimeout(z.current),z.current=window.setTimeout(()=>{B("replace",{q:e,service:t,city:s})},500),()=>{z.current&&window.clearTimeout(z.current)}},[k,S,M,y,v,N]),(0,r.useEffect)(()=>{A(1)},[y,v,N,g]),(0,r.useEffect)(()=>{(e=>{let t=y.trim(),s=v.trim(),r=N.trim();if(!t&&!s&&!r){O(null),U(!1);return}let a=!0;U(!0);let l=r?"":g||"",n=new URLSearchParams;return t&&n.set("q",t),s&&n.set("service",s),r&&n.set("city",r),l&&n.set("region",l),n.set("offset",String((e-1)*10)),n.set("limit",String(10)),fetch(`/api/ibiz/search?${n.toString()}`).then(e=>e.ok?e.json():null).then(e=>{a&&(O(e),U(!1))}).catch(()=>{a&&(O(null),U(!1))}),()=>{a=!1}})(W)},[W,y,v,N,g]);let H=q?Math.ceil((q.total||0)/10):0,K=(0,r.useMemo)(()=>{let e=q?.companies||[],t=[],s=[];for(let r of e)(r.logo_url||"").trim()?t.push(r):s.push(r);return[...t,...s]},[q]),Q=(0,r.useMemo)(()=>(0,u.tokenizeHighlightQuery)(y),[y]),_=(0,r.useMemo)(()=>(0,u.tokenizeHighlightQuery)(v),[v]),G=(0,r.useMemo)(()=>(0,u.tokenizeHighlightQuery)(N),[N]),I=(0,r.useMemo)(()=>Q.length>0?Q:_,[Q,_]);return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col font-sans bg-gray-100",children:[(0,t.jsx)(a.default,{}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-[#b10a78] to-[#7a0150] text-white py-6",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:x("search.results")}),(0,t.jsxs)("form",{className:"mt-4 space-y-3",onSubmit:e=>{e.preventDefault(),B("push")},children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"sr-only",htmlFor:"search-company",children:x("search.companyPlaceholder")}),(0,t.jsx)("input",{id:"search-company",value:k,onChange:e=>C(e.target.value),inputMode:"search",placeholder:x("search.companyPlaceholder"),className:F}),(0,t.jsx)("button",{type:"submit","aria-label":x("search.find"),className:E,children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"sr-only",htmlFor:"search-service",children:x("search.servicePlaceholder")}),(0,t.jsx)("input",{id:"search-service",value:S,onChange:e=>P(e.target.value),inputMode:"search",placeholder:x("search.servicePlaceholder"),className:F}),(0,t.jsx)("button",{type:"submit","aria-label":x("search.find"),className:E,children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]})]})}),(0,t.jsx)("div",{className:"bg-white border-b border-gray-200 py-3",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"hidden sm:block relative mb-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>T(e=>!e),"aria-label":x("filter.region"),"aria-haspopup":"listbox","aria-expanded":R,className:`w-full flex items-center justify-between gap-2 rounded-2xl bg-white shadow-sm border border-gray-200 px-4 py-3.5 text-[15px] font-medium focus:outline-none focus:ring-2 focus:ring-yellow-300/70 focus:border-[#820251]/30 ${g?"text-[#820251]":"text-gray-500/60"}`,children:[(0,t.jsx)("span",{className:"min-w-0 truncate",children:g?x(`region.${g}`):x("filter.chooseRegion")}),(0,t.jsx)("svg",{className:`w-5 h-5 transition-transform ${R?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),R&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hidden sm:block fixed inset-0 z-10",onClick:()=>T(!1)}),(0,t.jsxs)("div",{role:"listbox",className:"hidden sm:block absolute left-0 right-0 z-20 mt-2 rounded-2xl bg-white shadow-2xl ring-1 ring-black/5 overflow-hidden",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{p(null),L(""),B("push",{region:null,city:""}),T(!1),$.current?.focus()},className:`w-full px-5 py-3 text-left text-sm hover:bg-gray-50 transition-colors border-b border-gray-100 ${!g?"text-[#820251] font-bold bg-gray-50/50":"text-gray-700"}`,children:x("search.allRegions")}),(0,t.jsx)("div",{className:"py-1 max-h-[50vh] overflow-y-auto",children:c.regions.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{p(e.slug),L(""),B("push",{region:e.slug,city:""}),T(!1),$.current?.focus()},className:`w-full px-5 py-2.5 text-left text-sm hover:bg-gray-50 transition-colors ${g===e.slug?"text-[#820251] font-bold bg-gray-50/50":"text-gray-700"}`,children:x(`region.${e.slug}`)},e.slug))})]})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"sr-only",htmlFor:"filter-location",children:x("filter.city")}),(0,t.jsx)("input",{id:"filter-location",ref:$,value:M,onChange:e=>{let t=e.target.value;L(t),t.trim()&&g&&p(null)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),B("push"))},inputMode:"search",placeholder:x("filter.locationLabel"),className:F}),(0,t.jsx)("button",{type:"button","aria-label":x("search.find"),onClick:()=>B("push"),className:E,children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]})}),(0,t.jsxs)("div",{className:"container mx-auto py-10 px-4",children:[(y||v||N||g)&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:[y&&(0,t.jsxs)(t.Fragment,{children:[x("search.companyPlaceholder"),":"," ",(0,t.jsxs)("span",{className:"font-bold text-[#820251]",children:["Â«",y,"Â»"]})]}),y&&v&&(0,t.jsx)("span",{className:"text-gray-400",children:" Â· "}),v&&(0,t.jsxs)(t.Fragment,{children:[x("search.servicePlaceholder"),":"," ",(0,t.jsxs)("span",{className:"font-bold text-[#820251]",children:["Â«",v,"Â»"]})]}),(y||v)&&N&&(0,t.jsx)("span",{className:"text-gray-400",children:" Â· "}),N&&(0,t.jsxs)(t.Fragment,{children:[x("filter.city"),": ",(0,t.jsx)("span",{className:"font-bold text-[#820251]",children:N})]}),g&&!N&&(0,t.jsxs)("span",{className:"font-bold text-[#820251]",children:[" â€” ",f]})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[x("search.found"),": ",D?"â€¦":(0,d.formatCompanyCount)(q?.total??0)]})]}),D?(0,t.jsx)("div",{className:"bg-white rounded-lg p-10 text-center text-gray-500",children:x("common.loading")}):y||v||N?0===(q?.companies||[]).length?(0,t.jsxs)("div",{className:"bg-white rounded-lg p-10 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ”"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:x("company.notFound")}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:x("company.notFoundDesc")}),g&&(0,t.jsx)("button",{onClick:()=>p(null),className:"text-[#820251] hover:underline mb-4 block mx-auto",children:x("company.showAllRegions")}),(0,t.jsx)(m.default,{href:"/#catalog",className:"inline-block bg-[#820251] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#7a0150] transition-colors",children:x("nav.catalog")})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col gap-4",children:K.map(e=>(0,t.jsx)(n.default,{company:e,showCategory:!0,variant:"search",highlightNameTokens:I,highlightServiceTokens:_,highlightLocationTokens:G},e.id))}),(0,t.jsx)(h,{currentPage:W,totalPages:H,onPageChange:A})]}):(0,t.jsx)("div",{className:"bg-white rounded-lg p-10 text-center text-gray-500",children:x("search.placeholder")})]})]}),(0,t.jsx)(l.default,{})]})}function g(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex flex-col font-sans bg-gray-100",children:(0,t.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-[#820251] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°..."})]})})}),children:(0,t.jsx)(x,{})})}e.s(["default",()=>g],90454)}]);